#!/bin/sh

#================================================================
#
#	Здесь могут располагаются вспомогательные глобальные
#	переменные необходимые для проведения тестов
#
#================================================================
# 	Документация по пакету тестирования находится по ссылке
#   https://bats-core.readthedocs.io/en/stable/
#================================================================

CONFIG="../../build/CONFIG"
ROUTER=$(cat < "${CONFIG}" | sed -n 's/ROUTER=\(.*\)$/\1/p')
PORT=$(cat < "${CONFIG}" | sed -n 's/PORT=\(.*\)$/\1/p')

#----------------------------------------------------------------------------------------------------------------------
#  Запускаем переданную команду на удаленном устройстве
#----------------------------------------------------------------------------------------------------------------------
on_server(){
	cmd="${1}"
	ssh "${ROUTER}" -p "${PORT}" "${cmd}"
}

#----------------------------------------------------------------------------------------------------------------------
# В случае ошибок в тесте - будет вывод основных критериев работы
#----------------------------------------------------------------------------------------------------------------------
print_on_error(){
	status=${1}; output=${2}
	echo "status=${status}"
	echo "output=${output}"
}

#----------------------------------------------------------------------------------------------------------------------
# Печатаем строку из 100  знаков равно
#----------------------------------------------------------------------------------------------------------------------
print_line()(printf '%100.s' ' '| tr ' ' '=' && printf '\n')



